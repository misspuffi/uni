(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-pages-coupon-poster"],{"4bd2":function(e,t,r){"use strict";r.r(t);var a=r("b17c"),n=r.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(i);t["default"]=n.a},"77b2":function(e,t,r){var a=r("dfaa");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("4f06").default;n("7df41d47",a,!0,{sourceMap:!1,shadowMode:!1})},"9a8b":function(e,t,r){"use strict";r.r(t);var a=r("bcbf1"),n=r("4bd2");for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);r("de44");var o=r("f0c5"),s=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"567fe50d",null,!1,a["a"],void 0);t["default"]=s.exports},b17c:function(e,t,r){"use strict";r("7a82");var a=r("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("3835")),i=a(r("5530")),o=a(r("c7eb")),s=a(r("1da1")),u=r("26cb"),c={components:{},props:{},data:function(){return{confirmText:"长按上图保存图片",options:"",src:""}},computed:(0,u.mapState)({primaryColor:function(e){return e.config.configInfo.primaryColor},configInfo:function(e){return e.config.configInfo},userInfo:function(e){return e.user.userInfo}}),onLoad:function(e){var t=this;return(0,s.default)((0,o.default)().mark((function r(){var a;return(0,o.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.options=e,t.$util.setNavigationBarColor({bg:t.primaryColor}),t.widget=t.$refs.canvas,t.$util.showLoading(),t.$util.setNavigationBarColor({bg:t.primaryColor}),a=t,setTimeout((function(){a.canvase()}),1e3);case 7:case"end":return r.stop()}}),r)})))()},methods:(0,i.default)((0,i.default)({},(0,u.mapActions)(["user/report"])),{},{canvase:function(){var e=this;return(0,s.default)((0,o.default)().mark((function t(){var r,a,n,i,s,u,c,f,p,d;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,a=e.userInfo,n=a.nickName,i=a.avatarUrl,s=e.$util.getPage(-1),s.qr_code,u=s.detail,c=u.share_img,n=n.substring(0,10),f=12*n.length+33,p=e.configInfo.app_name,d={css:{width:"652rpx",height:"966rpx",background:"#fff",borderRadius:"20rpx"},views:[{type:"image",src:c,css:{width:"652rpx",height:"652rpx",position:"absolute",top:"0rpx",left:"0rpx",borderRadius:"20rpx 20rpx 0 0"}},{type:"text",text:n,css:{width:f,borderRadius:"27rpx",position:"absolute",top:"30rpx",left:"67rpx",fontSize:"26rpx",background:"#555",color:"#fff",textAlign:"center",padding:"7rpx 5rpx 12rpx 30rpx"}},{type:"image",src:i,css:{width:"64rpx",height:"64rpx",position:"absolute",top:"23rpx",left:"33rpx",borderRadius:"32rpx",border:"3rpx solid #fff"}},{type:"text",text:p,css:{position:"absolute",bottom:"176rpx",left:"50rpx",fontSize:"28rpx",color:"#333",textAlign:"left"}},{type:"text",text:"微信扫一扫立即使用",css:{position:"absolute",bottom:"122rpx",left:"50rpx",fontSize:"28rpx",color:"#333",textAlign:"left"}},{type:"image",src:cover,css:{width:"242rpx",height:"242rpx",position:"absolute",bottom:"40rpx",right:"45rpx",borderRadius:"121rpx"}}]},e.$refs.painter.render(d),e.$refs.painter.canvasToTempFilePathSync({fileType:"jpg",quality:1,success:function(t){r.$util.hideAll(),e.src=t.tempFilePath}});case 10:case"end":return t.stop()}}),t)})))()},extraImage:function(){var e=this;return(0,s.default)((0,o.default)().mark((function t(){var r;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.widget.canvasToTempFilePath(),r.then((function(t){e.src=t.tempFilePath}));case 2:case"end":return t.stop()}}),t)})))()},previewImage:function(){var e=this.src;uni.previewImage({current:e,urls:[e]})},saveImage:function(){var e=this;return(0,s.default)((0,o.default)().mark((function t(){var r,a,i,s;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$util.checkAuth({type:"writePhotosAlbum"});case 2:return r=e.src,t.next=5,uni.saveImageToPhotosAlbum({filePath:r});case 5:if(a=t.sent,i=(0,n.default)(a,2),s=i[0],i[1],!s){t.next=11;break}return t.abrupt("return");case 11:uni.showToast({icon:"none",title:"保存成功"});case 12:case"end":return t.stop()}}),t)})))()},toPreviewSave:function(){this.previewImage()}})};t.default=c},bcbf1:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return a}));var a={lPainter:r("f300").default},n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[r("v-uni-view",{staticClass:"hideCanvasView"},[r("l-painter",{ref:"painter",staticClass:"hideCanvas",attrs:{useCORS:!0}})],1),e.src?[r("v-uni-image",{staticClass:"code-img",attrs:{src:e.src},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"save-btn flex-center f-title c-base radius",style:{background:e.primaryColor},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toPreviewSave.apply(void 0,arguments)}}},[e._v(e._s(e.confirmText))]),r("v-uni-view",{staticClass:"space-safe"})]:e._e()],2)},i=[]},de44:function(e,t,r){"use strict";var a=r("77b2"),n=r.n(a);n.a},dfaa:function(e,t,r){var a=r("24fb");t=a(!1),t.push([e.i,".code-img[data-v-567fe50d]{width:%?652?%;height:%?966?%;margin:%?20?% auto;border-radius:%?20?%}.save-btn[data-v-567fe50d]{width:%?490?%;height:%?80?%;margin:%?68?% auto}.hideCanvasView[data-v-567fe50d]{position:relative}.hideCanvas[data-v-567fe50d]{position:absolute;left:%?-9999?%;top:%?-9999?%}",""]),e.exports=t}}]);