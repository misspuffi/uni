(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["technician-pages-order-detail"],{"04b1":function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac1f"),i("5319"),i("99af"),i("caad");var n=a(i("c7eb")),s=a(i("1da1")),o=a(i("5530")),l=i("26cb"),r=a(i("6bd8")),c={components:{timeline:r.default},data:function(){return{options:{},statusPayType:[2,3,4,5,6],statusType:{"-1":"已拒单",2:"待接单",3:"已接单",4:"已出发",5:"已到达",6:"服务中",7:"已完成"},carType:{0:"公交/地铁",1:"出租车"},payType:{1:"微信支付",2:"余额支付",3:"支付宝支付"},lineList:[],base_service:[{pay_type:3,title:"技师接单",time:"receiving_time",icon:"iconjishijiedan"},{pay_type:4,title:"技师出发",time:"serout_time",icon:"iconjishichufa"},{pay_type:5,title:"技师到达",time:"arrive_time",icon:"iconjishidaoda"},{pay_type:6,title:"开始服务",time:"start_service_time",icon:"iconjishifuwu"},{pay_type:7,title:"服务完成",time:"order_end_time",icon:"iconjishiwancheng"},{pay_type:7,title:"签字确认",time:"sign_time",icon:""}],base_bell:[{pay_type:3,title:"技师接单",time:"receiving_time",icon:"iconjishijiedan"},{pay_type:6,title:"开始服务",time:"start_service_time",icon:"iconjishifuwu"},{pay_type:7,title:"服务完成",time:"order_end_time",icon:"iconjishiwancheng"}],detail:{pay_type:0},check_label:[],coach_refund_text:"",lockTap:!1,popupInfo:{title:"",type:"",param:{},imgs:[],location:{lat:0,lng:0,address:""}}}},computed:(0,l.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo},userInfo:function(t){return t.user.userInfo},over_time_text:function(){return(new Date).getTime()+1e3*this.detail.end_time}}),onLoad:function(t){this.options=t,this.initIndex()},methods:(0,o.default)((0,o.default)((0,o.default)({},(0,l.mapActions)(["getConfigInfo"])),(0,l.mapMutations)([""])),{},{initIndex:function(){var t=arguments,e=this;return(0,s.default)((0,n.default)().mark((function i(){var a,s,o,l,r,c,u,d;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],a||!e.$jweixin.isWechat()){i.next=5;break}return i.next=4,e.$jweixin.initJssdk();case 4:e.$jweixin.wxReady((function(){e.$jweixin.hideOptionMenu()}));case 5:if(e.configInfo.id&&!a){i.next=8;break}return i.next=8,e.getConfigInfo();case 8:return s=e.options.id,i.next=11,e.$api.order.orderInfo({id:s});case 11:o=i.sent,e.$util.setNavigationBarColor({bg:e.primaryColor}),o.is_balance=1*o.balance>0?1:0,l=o.pay_type,r=o.time_long,c=o.start_service_time,u=o.is_add,d=void 0===u?0:u,6==l&&(o.start_service_time_unix=e.$util.DateToUnix(c)+60*r),e.lineList=d?e.base_bell:e.base_service,e.detail=o;case 18:case"end":return i.stop()}}),i)})))()},initRefresh:function(){this.initIndex(!0)},countEnd:function(){var t=this;this.$util.log("倒计时完了"),setTimeout((function(){t.initRefresh(),t.$util.back()}),1e3)},toLabel:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.detail.user_id,e.next=3,t.$api.technician.userLabelList({user_id:i});case 3:t.check_label=e.sent,t.$refs.label_item.open();case 5:case"end":return e.stop()}}),e)})))()},toRefuse:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.coach_refund_text="",t.$refs.refuse_item.open();case 2:case"end":return e.stop()}}),e)})))()},confirmRefuse:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.coach_refund_text,i=i.length>0?i.replace(/(^\s*)|(\s*$)/g,""):"",0!=i.length){e.next=5;break}return t.$util.showToast({title:"请输入拒单原因"}),e.abrupt("return");case 5:t.coach_refund_text=t.coach_refund_text.substring(0,200),t.toConfirm(-1);case 7:case"end":return e.stop()}}),e)})))()},toGetLocation:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var i,a,s,o,l,r,c,u,d,p,v,f,m,_,g,w,y,h;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.popupInfo,a=i.lat,s=void 0===a?0:a,o=i.lng,l=void 0===o?0:o,r=i.address,c=void 0===r?"":r,!(s&&l&&c)){e.next=3;break}return e.abrupt("return");case 3:if(!t.$jweixin.isWechat()){e.next=25;break}return t.$util.showLoading(),e.next=7,t.$jweixin.wxReady2();case 7:return e.next=9,t.$jweixin.getWxLocation();case 9:if(u=e.sent,d=u.latitude,p=void 0===d?0:d,v=u.longitude,f=void 0===v?0:v,p){e.next=18;break}return t.$util.hideAll(),t.$util.showToast({title:"请授权定位当前地址"}),e.abrupt("return");case 18:if(!p||!f){e.next=25;break}return m="".concat(p,",").concat(f),e.next=22,t.$api.base.getMapInfo({location:m});case 22:_=e.sent,g=JSON.parse(_),w=g.status,y=g.result,0==w&&(t.$util.hideAll(),h=y.address,t.popupInfo.location={lat:p,lng:f,address:h});case 25:case"end":return e.stop()}}),e)})))()},imgUpload:function(t){var e=t.imagelist,i=t.imgtype;this.popupInfo[i]=e},confirmOper:function(){var t=this.$util.deepCopy(this.popupInfo),e=t.type,i=t.param,a=t.imgs,n=t.location,s=n.lat,o=void 0===s?0:s,l=n.lng,r=void 0===l?0:l,c=n.address,u=void 0===c?"":c;if([5,7].includes(e)&&0===a.length)this.$util.showToast({title:"请先拍照"});else if(o||r||u){if([5,7].includes(e)){var d=a[0].path;n.path=d}this.toConfirmUpdate(e,i,n)}else this.$util.showToast({title:"请先获取当前定位地址"})},toConfirm:function(t){var e=this;return(0,s.default)((0,n.default)().mark((function i(){var a,s,o,l;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=e.detail.id,s={order_id:a,type:t},-1==t&&(s.coach_refund_text=e.coach_refund_text),![4,5,7].includes(t)){i.next=12;break}return o={4:"确认出发",5:"确认到达",7:"确认完成"},l=o[t],e.popupInfo=Object.assign({},e.popupInfo,{title:l,type:t,param:s,imgs:[],location:{lat:0,lng:0,address:""}}),i.next=9,e.toGetLocation();case 9:e.$refs.oper_item.open(),i.next=13;break;case 12:e.toConfirmUpdate(t,s);case 13:case"end":return i.stop()}}),i)})))()},toConfirmUpdate:function(t,e){var i=arguments,a=this;return(0,s.default)((0,n.default)().mark((function s(){var o,l,r,c,u,d;return(0,n.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=i.length>2&&void 0!==i[2]?i[2]:{},[4,5,7].includes(t)&&(l=o.lat,r=o.lng,c=o.address,u=o.path,4===t&&(e.serout_lat=l,e.serout_lng=r,e.serout_address=c),5==t&&(e.arrive_img=u,e.arr_lat=l,e.arr_lng=r,e.arr_address=c),7==t&&(e.end_img=u,e.end_lat=l,e.end_lng=r,e.end_address=c)),d={"-1":"已拒绝接单",3:"接单成功",4:"已成功出发",5:"已成功到达",6:"已开始服务",7:"服务已完成"},!a.lockTap){n.next=5;break}return n.abrupt("return");case 5:return a.lockTap=!0,a.$util.showLoading(),n.prev=7,n.next=10,a.$api.technician.updateOrder(e);case 10:-1==t&&a.$refs.refuse_item.close(),[4,5,7].includes(t)&&a.$refs.oper_item.close(),a.$util.hideAll(),a.$util.showToast({title:d[t]}),a.lockTap=!1,a.initRefresh(),a.$util.back(),n.next=23;break;case 19:return n.prev=19,n.t0=n["catch"](7),setTimeout((function(){a.lockTap=!1,a.$util.hideAll()}),2e3),n.abrupt("return");case 23:case"end":return n.stop()}}),s,null,[[7,19]])})))()},toTel:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var i,a,s,o;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.detail,a=i.id,s=i.pay_type,![2,3,4,5,6].includes(s)){e.next=8;break}return e.next=4,t.$api.base.getVirtualPhone({order_id:a});case 4:o=e.sent,t.$util.goUrl({url:o,openType:"call"}),e.next=9;break;case 8:t.$util.showToast({title:"服务结束不能联系客户哦"});case 9:case"end":return e.stop()}}),e)})))()},toCopy:function(){var t=this.detail.address_info,e=t.address,i=t.address_info,a="".concat(e).concat(i);this.$util.goUrl({url:a,openType:"copy"})},toMap:function(t){var e=this;return(0,s.default)((0,n.default)().mark((function t(){var i,a,s,o,l;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.detail.address_info,a=i.address,s=i.address_info,o=i.lat,l=i.lng,t.next=3,e.$util.checkAuth({type:"userLocation"});case 3:return t.next=5,uni.getLocation({type:"gcj02"});case 5:return t.next=7,uni.openLocation({latitude:1*o,longitude:1*l,name:"".concat(a," ").concat(s),scale:28});case 7:case"end":return t.stop()}}),t)})))()}})};e.default=c},"062e":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.d-copy[data-v-12da27dd]{border:1px solid transparent;width:%?70?%;border-radius:%?8?%}.copy-btn[data-v-12da27dd]{height:%?32?%;line-height:%?32?%;background:#eee;text-align:center;padding:%?5?% %?10?%}.popup-label[data-v-12da27dd]{border-radius:%?16?% %?16?% 0 0}.popup-label .iconguanbi[data-v-12da27dd]{top:%?32?%;right:%?28?%;color:#a8aeb8;font-size:%?40?%}.popup-label .list-item .list-child[data-v-12da27dd]{width:auto;min-width:%?120?%;height:%?70?%;display:inline-block;padding:0 %?20?%;margin:0 %?20?% %?25?% 0}.popup-label .list-item .list-child .tag-item[data-v-12da27dd]{height:%?70?%}.popup-label .list-item .list-child .tag-item .icon-add[data-v-12da27dd]{font-size:%?24?%;margin-right:%?5?%}.popup-label .list-item .list-child .bg-item[data-v-12da27dd]{top:0;left:0;width:100%;height:100%;opacity:.15}',""]),t.exports=e},"0758":function(t,e,i){"use strict";i.r(e);var a=i("0c54"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"0c54":function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("c7eb")),s=a(i("1da1"));i("a9e3");var o=i("26cb"),l={name:"timeline",props:{list:{type:Array,default:function(){return{}}},info:{type:Object,default:function(){return{}}},type:{type:Number,default:function(){return 0}}},data:function(){return{}},computed:(0,o.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor}}),methods:{toPreviewImage:function(t){var e=this.info[t];this.$util.previewImage({curent:e,urls:[e]})},toMap:function(t){var e=this;return(0,s.default)((0,n.default)().mark((function i(){var a;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.info,i.next=3,e.$util.checkAuth({type:"userLocation"});case 3:return i.next=5,uni.getLocation({type:"gcj02"});case 5:return i.next=7,uni.openLocation({latitude:1*a["".concat(t,"_lat")],longitude:1*a["".concat(t,"_lng")],name:a["".concat(t,"_address")],scale:28});case 7:case"end":return i.stop()}}),i)})))()},toSign:function(){var t=this.info.id,e="/user/pages/order/sign?id=".concat(t);this.$util.goUrl({url:e})}}};e.default=l},"12f4":function(t,e,i){"use strict";var a=i("2b1f"),n=i.n(a);n.a},2779:function(t,e,i){"use strict";var a=i("b5ab"),n=i.n(a);n.a},"2b1f":function(t,e,i){var a=i("062e");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("eb5df9e4",a,!0,{sourceMap:!1,shadowMode:!1})},"2e58":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.record-item[data-v-01116cbe]{padding:0 0 %?30?% %?30?%}.record-item .item-tag[data-v-01116cbe]{width:14px;height:14px;display:block;background:#fff;border-radius:50%;top:0;left:-7px;-webkit-transform:rotate(1turn);transform:rotate(1turn)}.record-item .item-text[data-v-01116cbe]{line-height:%?34?%}.record-item .item-img[data-v-01116cbe]{width:%?180?%;min-height:%?118?%}.record-item .item-btn[data-v-01116cbe]{width:%?160?%;height:%?64?%;background:#eee}.record-item.b-1px-l[data-v-01116cbe]::before{border-left:2px solid #ccc}.record-item[data-v-01116cbe]:last-child{padding-bottom:0}',""]),t.exports=e},"55cb":function(t,e,i){"use strict";i.r(e);var a=i("04b1"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"68c2":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.detail.id?i("v-uni-view",{staticClass:"order-pages"},[6==t.detail.pay_type?i("v-uni-view",{staticClass:"fix",staticStyle:{top:"-100%",left:"-100%"}},[i("min-countdown",{attrs:{targetTime:1e3*t.detail.start_service_time_unix,isPlay:!0}})],1):t._e(),i("v-uni-view",{staticClass:"item-child  pd-lg fill-base f-paragraph c-base",style:{background:t.primaryColor}},[i("v-uni-view",{staticClass:"text-bold"},[t._v(t._s(t.statusType[t.detail.pay_type]))]),1==t.detail.pay_type&&t.detail.end_time>0?i("v-uni-view",{staticClass:"f-caption mt-sm"},[t._v("请在"),i("min-countdown",{attrs:{targetTime:t.over_time_text},on:{callback:function(e){arguments[0]=e=t.$handleEvent(e),t.countEnd.apply(void 0,arguments)}}}),t._v("内完成支付，逾期未支付，订单将自动取消")],1):t._e(),i("v-uni-view",{staticClass:"space-lg"})],1),i("v-uni-view",{staticClass:"menu-list flex-warp rel ml-lg mr-lg pt-lg pb-lg pl-md pr-md fill-base f-paragraph c-caption radius-16",class:[{"add-bell":t.detail.is_add}]},[i("v-uni-view",{staticClass:"menu-line abs b-1px-b"}),t._l(t.lineList,(function(e,a){return[e.icon?i("v-uni-view",{key:a+"_0",staticClass:"item-child flex-center flex-column f-icontext c-paragraph",style:{color:t.detail.pay_type>e.pay_type-1?t.primaryColor:""}},[i("v-uni-view",{staticClass:"item-img fill-base flex-center mb-sm radius",style:{borderColor:t.detail.pay_type>e.pay_type-1?t.primaryColor:""}},[i("i",{staticClass:"iconfont",class:e.icon})]),i("v-uni-view",[t._v(t._s(e.title))])],1):t._e()]}))],2),i("v-uni-view",{staticClass:"item-child mt-md ml-lg mr-lg pd-lg fill-base radius-16"},[i("v-uni-view",{staticClass:"flex-between pb-lg"},[i("v-uni-view",{staticClass:"f-paragraph c-title max-380 ellipsis"},[t._v("服务内容")])],1),t._l(t.detail.order_goods,(function(e,a){return i("v-uni-view",{key:a,staticClass:"flex-center",class:[{"mb-lg":a!=t.detail.order_goods.length-1}]},[i("v-uni-view",{staticClass:"avatar lg radius-16"},[i("v-uni-view",{staticClass:"h5-image avatar lg radius-16",style:{backgroundImage:"url('"+e.goods_cover+"')"}})],1),i("v-uni-view",{staticClass:"flex-1 ml-md"},[i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"f-title c-title ellipsis",class:[{"max-300":e.refund_num>0},{"max-450":0==e.refund_num}]},[t._v(t._s(e.goods_name))]),e.refund_num>0?i("v-uni-view",{staticClass:"f-caption c-warning"},[t._v("已退x"+t._s(e.refund_num))]):t._e()],1),i("v-uni-view",{staticClass:"f-caption c-caption mt-md"},[t._v("服务时长："+t._s(e.time_long)+"分钟")]),i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"flex-y-baseline f-caption c-warning"},[t._v("¥"),i("v-uni-view",{staticClass:"f-title text-bold"},[t._v(t._s(e.price))])],1),i("v-uni-view",{staticClass:"c-paragraph"},[t._v("x"+t._s(e.num))])],1)],1)],1)}))],2),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pd-lg fill-base f-paragraph c-caption radius-16"},[i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",[t._v("下单人")]),i("v-uni-view",{staticClass:"flex-y-center"},[i("v-uni-view",{staticClass:"c-title max-350 ellipsis"},[t._v(t._s(t.detail.address_info.user_name))]),i("v-uni-view",{staticClass:"ml-sm",style:{color:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toLabel.apply(void 0,arguments)}}},[t._v("查看标签")])],1)],1),i("v-uni-view",{staticClass:"flex-between mt-md",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toTel.apply(void 0,arguments)}}},[i("v-uni-view",[t._v("联系方式")]),i("v-uni-view",{staticClass:"flex-y-center",style:{color:t.primaryColor}},[i("i",{staticClass:"iconfont iconbodadianhua mr-sm"}),i("v-uni-view",[t._v("拨打电话")])],1)],1),i("v-uni-view",{staticClass:"mt-md"},[i("v-uni-view",[t._v("服务地址")]),i("v-uni-view",{staticClass:"flex-center"},[i("v-uni-view",{staticClass:"c-title mt-sm flex-1 mr-md"},[i("span",[t._v(t._s(""+t.detail.address_info.address+t.detail.address_info.address_info))]),i("span",{staticClass:"copy-btn radius-5 f-icontext ml-sm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toCopy.apply(void 0,arguments)}}},[t._v("复制")])]),i("v-uni-view",{staticClass:"flex-center flex-column f-icontext",style:{color:t.primaryColor},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toMap.apply(void 0,arguments)}}},[i("i",{staticClass:"iconfont icon-dingwei",staticStyle:{"font-size":"42rpx"}}),i("v-uni-view",[t._v("立刻导航去")])],1)],1)],1),t.detail.text?i("v-uni-view",{staticClass:"mt-md"},[i("v-uni-view",[t._v("订单备注")]),i("v-uni-view",{staticClass:"c-title mt-sm"},[t._v(t._s(t.detail.text))])],1):t._e()],1),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pd-lg fill-base f-paragraph c-caption radius-16"},[i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("下单时间")]),i("v-uni-view",{staticClass:"c-title"},[t._v(t._s(t.detail.create_time))])],1),i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("服务时间")]),i("v-uni-view",{staticClass:"c-title"},[t._v(t._s(t.detail.start_time))])],1),i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("服务时长")]),i("v-uni-view",{staticClass:"c-title"},[t._v(t._s(t.detail.time_long)+"分钟")])],1),t.detail.is_add?t._e():[i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("车费详情")]),i("v-uni-view",{staticClass:"flex-y-center c-title"},[t._v(t._s(t.carType[t.detail.car_type])),1==t.detail.car_type?i("v-uni-view",{staticClass:"ml-md"},[t._v("全程"+t._s(t.detail.distance))]):t._e()],1)],1),1==t.detail.car_type?i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("出行费用")]),i("v-uni-view",{staticClass:"c-warning"},[t._v("出租车 ¥"+t._s(t.detail.car_price))])],1):t._e()],i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("服务项目费用")]),i("v-uni-view",{staticClass:"c-warning"},[t._v("¥"+t._s(t.detail.init_service_price))])],1),1*t.detail.discount>0?i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("卡券优惠")]),i("v-uni-view",{staticClass:"c-warning"},[t._v("-¥"+t._s(t.detail.discount))])],1):t._e(),i("v-uni-view",{staticClass:"flex-between mt-md"},[i("v-uni-view",[t._v("支付方式")]),i("v-uni-view",{staticClass:"c-title"},[t._v(t._s(t.payType[t.detail.pay_model]))])],1),i("v-uni-view",{staticClass:"flex-between mt-md pt-md b-1px-t"},[i("v-uni-view"),i("v-uni-view",{staticClass:"flex-y-baseline c-title"},[t._v("总计："),i("v-uni-view",{staticClass:"c-warning"},[t._v("¥"+t._s(t.detail.pay_price))])],1)],1)],2),i("v-uni-view",{staticClass:"mt-md ml-lg mr-lg pd-lg fill-base f-paragraph c-caption radius-16"},[i("v-uni-view",{staticClass:" flex-y-center pb-lg flex-warp"},[i("v-uni-view",{staticClass:"flex-between c-title"},[t._v("订单编号：")]),i("v-uni-view",{staticClass:"flex-between flex-1 "},[i("v-uni-view",{staticClass:"c-title"},[t._v(t._s(t.detail.order_code))]),i("v-uni-view",{staticClass:"f-icontext d-copy text-center",style:{borderColor:t.primaryColor,color:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({openType:"copy",url:t.detail.order_code})}}},[t._v("复制")])],1)],1),i("timeline",{attrs:{list:t.lineList,info:t.detail}})],1),i("v-uni-view",{staticClass:"space-max-footer"}),t.statusPayType.includes(t.detail.pay_type)||7==t.detail.pay_type&&!t.detail.is_add&&!t.detail.label_time?i("v-uni-view",{staticClass:"footer-info fix fill-base"},[i("v-uni-view",{staticClass:"flex-between pd-lg"},[i("v-uni-view"),i("v-uni-view",{staticClass:"flex-center f-desc c-title"},[2==t.detail.pay_type?[i("v-uni-button",{staticClass:"clear-btn order",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTel.apply(void 0,arguments)}}},[t._v("联系客户")]),i("v-uni-button",{staticClass:"clear-btn order",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toRefuse.apply(void 0,arguments)}}},[t._v("拒绝接单")]),i("v-uni-button",{staticClass:"clear-btn order",style:{color:"#fff",background:t.primaryColor,borderColor:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toConfirm(3)}}},[t._v("确认接单")])]:t._e(),[3,4,5].includes(t.detail.pay_type)?[i("v-uni-button",{staticClass:"clear-btn order",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTel.apply(void 0,arguments)}}},[t._v("联系客户")]),i("v-uni-button",{staticClass:"clear-btn order",style:{color:"#fff",background:t.primaryColor,borderColor:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toConfirm(t.detail.is_add?6:1*t.detail.pay_type+1)}}},[t._v(t._s(t.detail.is_add?"开始服务":3==t.detail.pay_type?"已出发":4==t.detail.pay_type?"拍照确认到达":"开始服务"))])]:t._e(),6==t.detail.pay_type?[i("v-uni-button",{staticClass:"clear-btn order",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTel.apply(void 0,arguments)}}},[t._v("联系客户")]),i("v-uni-button",{staticClass:"clear-btn order",style:{color:"#fff",background:t.primaryColor,borderColor:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toConfirm(7)}}},[t._v("拍照完成服务")])]:t._e(),7==t.detail.pay_type?[i("v-uni-button",{staticClass:"clear-btn order",style:{color:"#fff",background:t.primaryColor,borderColor:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$util.goUrl({url:"/technician/pages/order/label?id="+t.detail.id+"&uid="+t.detail.user_id})}}},[t._v("评价客户")])]:t._e()],2)],1),i("v-uni-view",{staticClass:"space-safe"})],1):t._e(),i("uni-popup",{ref:"label_item",attrs:{type:"bottom",custom:!0}},[i("v-uni-view",{staticClass:"popup-label fill-base pd-lg rel"},[i("i",{staticClass:"iconfont iconguanbi abs",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.label_item.close()}}}),i("v-uni-view",{staticClass:"pb-md flex-center f-title c-title text-bold"},[t._v("客户标签")]),i("v-uni-view",{staticClass:"space-lg"}),i("v-uni-view",{staticClass:"space-lg"}),i("v-uni-scroll-view",{staticStyle:{width:"100%","max-height":"50vh"},attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"list-item f-caption"},[0==t.check_label.length?i("v-uni-view",{staticClass:"pb-lg f-paragraph"},[t._v("暂无评价标签")]):t._e(),t._l(t.check_label,(function(e,a){return i("v-uni-view",{key:a,staticClass:"list-child cur radius rel"},[i("v-uni-view",{staticClass:"bg-item radius abs",style:{background:t.primaryColor,borderColor:t.primaryColor}}),i("v-uni-view",{staticClass:"tag-item flex-center",style:{color:t.primaryColor}},[t._v(t._s(e.title))])],1)}))],2)],1),i("v-uni-view",{staticClass:"space-safe"})],1)],1),i("uni-popup",{ref:"refuse_item",attrs:{type:"center",custom:!0}},[i("v-uni-view",{staticClass:"common-popup-content fill-base pd-lg radius-34"},[i("v-uni-view",{staticClass:"title"},[t._v("拒绝接单")]),i("v-uni-view",{staticClass:"desc"},[t._v("请确认是否拒接接单")]),i("v-uni-textarea",{staticClass:"pd-lg textarea f-desc c-title mt-lg radius-20",attrs:{maxlength:"200",placeholder:"请输入拒单原因","placeholder-class":"f-desc c-caption"},model:{value:t.coach_refund_text,callback:function(e){t.coach_refund_text=e},expression:"coach_refund_text"}}),i("v-uni-view",{staticClass:"flex-center mt-md",staticStyle:{width:"540rpx"}},[i("v-uni-view",{staticClass:"flex-1"}),i("v-uni-view",[t._v(t._s(t.coach_refund_text.length>200?200:t.coach_refund_text.length)+"/200")])],1),i("v-uni-view",{staticClass:"button"},[i("v-uni-view",{staticClass:"item-child",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.refuse_item.close()}}},[t._v("取消")]),i("v-uni-view",{staticClass:"item-child c-base",style:{background:t.primaryColor,color:"#fff"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.confirmRefuse.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1),i("uni-popup",{ref:"oper_item",attrs:{type:"center",custom:!0}},[i("v-uni-view",{staticClass:"common-popup-content fill-base pd-lg radius-34"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.popupInfo.title))]),i("v-uni-view",{staticClass:"space-md"}),4!==t.popupInfo.type?i("v-uni-view",{staticClass:"flex-warp mt-md",staticStyle:{width:"100%"}},[i("v-uni-view",[t._v("拍照打卡：")]),i("v-uni-view",{staticClass:"flex-1"},[i("upload",{attrs:{imagelist:t.popupInfo.imgs,filetype:"picture",imgtype:"imgs",text:"拍摄图片",imgsize:1,sourceType:2},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.imgUpload.apply(void 0,arguments)},del:function(e){arguments[0]=e=t.$handleEvent(e),t.imgUpload.apply(void 0,arguments)}}})],1)],1):t._e(),i("v-uni-view",{staticClass:"flex-warp mt-md",staticStyle:{width:"100%"}},[i("v-uni-view",[t._v("当前地点：")]),i("v-uni-view",{staticClass:"flex-1",class:[{"c-title":t.popupInfo.location.address},{"c-caption":!t.popupInfo.location.address}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toGetLocation.apply(void 0,arguments)}}},[t._v(t._s(t.popupInfo.location.address||"点击获取定位"))])],1),i("v-uni-view",{staticClass:"button"},[i("v-uni-view",{staticClass:"item-child",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$refs.oper_item.close()}}},[t._v("取消")]),i("v-uni-view",{staticClass:"item-child c-base",style:{background:t.primaryColor,color:"#fff"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.confirmOper.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],1):t._e()},n=[]},"6bd8":function(t,e,i){"use strict";i.r(e);var a=i("9538"),n=i("0758");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("2779");var o=i("f0c5"),l=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"01116cbe",null,!1,a["a"],void 0);e["default"]=l.exports},8908:function(t,e,i){"use strict";i.r(e);var a=i("68c2"),n=i("55cb");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("12f4");var o=i("f0c5"),l=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"12da27dd",null,!1,a["a"],void 0);e["default"]=l.exports},9538:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"record-box fill-base"},t._l(t.list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"record-item rel ml-sm b-1px-l",style:{padding:a==t.list.length-1?"0 0 0 30rpx":""}},[i("v-uni-text",{staticClass:"item-tag abs",class:[{cur:t.info.pay_type>e.pay_type-1}],style:{border:"2rpx solid "+t.primaryColor,background:t.info.pay_type>e.pay_type-1?t.primaryColor:""}}),i("v-uni-view",{staticClass:"c-title"},[i("v-uni-view",{staticClass:"item-text f-paragraph flex-y-baseline"},[t._v(t._s(e.title)),i("v-uni-view",{staticClass:"ml-md f-caption c-caption",style:{color:("签字确认"!=e.title||t.info.sign_img)&&t.info.pay_type>e.pay_type-1?t.primaryColor:""}},[t._v(t._s("签字确认"!=e.title||t.info.sign_img?t.info.pay_type>e.pay_type-1?"":"状态未开始":"暂未签字确认"))])],1),t.info[e.time]?i("v-uni-view",{staticClass:"c-caption"},[t._v(t._s(t.info[e.time]))]):t._e()],1),"技师出发"==e.title&&!t.info.is_add&&t.info.pay_type>3?[t.info.serout_address?i("v-uni-view",{staticClass:"flex-y-center mt-md f-caption c-title",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toMap("serout")}}},[i("i",{staticClass:"iconfont iconjuli mr-sm",style:{color:t.primaryColor}}),t._v(t._s(t.info.serout_address))]):t._e()]:t._e(),"技师到达"==e.title&&!t.info.is_add&&t.info.pay_type>4?[t.info.arrive_img?i("v-uni-view",{staticClass:"item-img mt-md radius-5",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toPreviewImage("arrive_img")}}},[i("v-uni-view",{staticClass:"h5-image item-img mt-md radius-5",style:{backgroundImage:"url('"+t.info.arrive_img+"')"}})],1):t._e(),t.info.arr_address?i("v-uni-view",{staticClass:"flex-y-center mt-md f-caption c-title",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toMap("arr")}}},[i("i",{staticClass:"iconfont iconjuli mr-sm",style:{color:t.primaryColor}}),t._v(t._s(t.info.arr_address))]):t._e()]:t._e(),"服务完成"==e.title&&7==t.info.pay_type?[t.info.end_img?i("v-uni-view",{staticClass:"item-img mt-md radius-5",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toPreviewImage("end_img")}}},[i("v-uni-view",{staticClass:"h5-image item-img mt-md radius-5",style:{backgroundImage:"url('"+t.info.end_img+"')"}})],1):t._e(),t.info.end_address?i("v-uni-view",{staticClass:"flex-y-center mt-md f-caption c-title",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toMap("end")}}},[i("i",{staticClass:"iconfont iconjuli mr-sm",style:{color:t.primaryColor}}),t._v(t._s(t.info.end_address))]):t._e()]:t._e(),"签字确认"==e.title&&7==t.info.pay_type?[t.info.sign_img?[i("v-uni-view",{staticClass:"item-img mt-md radius-5",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toPreviewImage("sign_img")}}},[i("v-uni-view",{staticClass:"h5-image item-img mt-md radius-5",style:{backgroundImage:"url('"+t.info.sign_img+"')"}})],1)]:t._e(),1!=t.type||t.info.is_add||t.info.sign_img?t._e():i("v-uni-view",{staticClass:"flex-between"},[i("v-uni-view",{staticClass:"item-btn flex-center mt-md c-base radius",style:{background:t.primaryColor},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toSign.apply(void 0,arguments)}}},[t._v("签字确认")]),i("v-uni-view")],1)]:t._e()],2)})),1)],1)},n=[]},b5ab:function(t,e,i){var a=i("2e58");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("2e03b23c",a,!0,{sourceMap:!1,shadowMode:!1})}}]);