(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dynamic-pages-detail"],{"0269":function(t,i,e){"use strict";e.r(i);var a=e("2cce"),n=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},"05b7":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.detail.id?e("v-uni-view",{staticClass:"dynamic-detail"},[e("v-uni-view",{staticClass:"banner-info rel"},[t.options.pid?e("v-uni-view",{staticClass:"abs",class:[{"back-user-ios":t.configInfo.isIos},{"back-user-android":!t.configInfo.isIos}],staticStyle:{"margin-top":"25rpx","z-index":"1"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.$util.goUrl({url:"/pages/service"})}}},[e("v-uni-view",{staticClass:"iconshouye iconfont"}),e("v-uni-view",{staticClass:"back-user_text"},[t._v("回到首页")])],1):t._e(),e("v-uni-view",{staticClass:"menu-info flex-center c-base abs radius",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.$refs.show_item.open()}}},[e("i",{staticClass:"iconfont icon-caidan"})]),t.detail.imgs.length>0?e("banner",{attrs:{list:t.detail.imgs,margin:0,autoplay:!0,indicatorActiveColor:t.primaryColor,dotWidth:20,dotBottom:30,height:654}}):t._e()],1),e("v-uni-view",{staticClass:"pd-lg"},[e("v-uni-view",{staticClass:"dynamic-info flex-center"},[e("v-uni-image",{staticClass:"avatar radius",attrs:{src:t.detail.coach_info.work_img}}),e("v-uni-view",{staticClass:"flex-1 ml-md"},[e("v-uni-view",{staticClass:"flex-between"},[e("v-uni-view",[e("v-uni-view",{staticClass:"f-min-title c-black text-bold max-400 ellipsis"},[t._v(t._s(t.detail.coach_info.coach_name))]),e("v-uni-view",{staticClass:"flex-y-center f-icontext c-caption mt-sm",style:{color:t.primaryColor}},[e("i",{staticClass:"iconfont",class:[t.iconType[t.detail.coach_info.work_status]],staticStyle:{"font-size":"24rpx","margin-right":"5rpx"}}),t._v(t._s(t.textType[t.detail.coach_info.work_status]))])],1),e("v-uni-view",{staticClass:"flex-y-center f-caption"},[t.detail.coach_info.is_work?e("v-uni-view",{staticClass:"app-follow-btn flex-center radius",style:{color:t.primaryColor,border:"1rpx solid "+t.primaryColor},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.getServiceList.apply(void 0,arguments)}}},[t._v("预约")]):t._e(),e("v-uni-view",{staticClass:"app-follow-btn flex-center radius ml-md",style:{background:t.detail.follow_status?t.primaryColor:"#fff",color:t.detail.follow_status?"#fff":t.primaryColor,border:"1rpx solid "+t.primaryColor},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toChangeItem(1)}}},[t.detail.follow_status?t._e():e("i",{staticClass:"iconfont icon-jia-bold"}),t._v(t._s(t.detail.follow_status?"已关注":"关注"))])],1)],1)],1)],1),e("v-uni-view",{staticClass:"f-min-title c-black text-bold mt-lg"},[t._v(t._s(t.detail.title))]),e("v-uni-view",{staticClass:"dynamic-content f-paragraph mt-lg mb-lg"},[e("v-uni-text",{staticStyle:{"word-break":"break-all"},attrs:{decode:"emsp"}},[t._v(t._s(t.detail.text))])],1),e("v-uni-view",{staticClass:"flex-between"},[e("v-uni-view",{staticClass:"f-caption c-caption"},[t._v(t._s(t.detail.friend_time))]),e("v-uni-view",{staticClass:"flex-y-baseline f-desc c-desc"},[e("i",{staticClass:"iconfont icondangqianweizhi",style:{color:t.primaryColor}}),t._v(t._s(t.detail.distance))])],1)],1),e("v-uni-view",{staticClass:"space-md fill-body"}),e("v-uni-view",{staticClass:"ml-lg mr-lg"},[e("v-uni-view",{staticClass:"flex-y-center f-min-title c-title text-bold b-1px-b",staticStyle:{height:"95rpx"}},[t._v("全部评论")]),0==t.list.data.length?e("v-uni-view",{staticClass:"no-data-item flex-center mt-lg pb-lg"},[e("v-uni-image",{staticClass:"avatar radius",attrs:{src:"https://lbqny.migugu.com/admin/anmo/mine/dynamic-user.png"}}),e("v-uni-view",{staticClass:"text flex-1 flex-y-center ml-md pl-lg f-icontext radius"},[t._v("评论千万条, 礼貌第一条")])],1):t._e(),t._l(t.list.data,(function(i,a){return e("v-uni-view",{key:a,staticClass:"list-item flex-warp fill-base pt-lg",on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.toDel(a)}}},[e("v-uni-image",{staticClass:"avatar radius",attrs:{mode:"aspectFill",src:i.avatarUrl}}),e("v-uni-view",{staticClass:"flex-1 ml-md pb-lg",class:[{"b-1px-b":a!=t.list.total-1}]},[e("v-uni-view",{staticClass:"flex-between",staticStyle:{height:"72rpx"}},[e("v-uni-view",{staticClass:"text flex-y-center f-caption max-400 ellipsis"},[t._v(t._s(i.nickName)),1==i.status?e("v-uni-view",{staticClass:"examine-btn flex-center f-icontext ml-md radius"},[t._v("审核中")]):t._e()],1),e("v-uni-view",{staticClass:"f-icontext c-caption"},[t._v(t._s(i.friend_time))])],1),e("v-uni-view",{staticClass:"comment f-paragraph mt-sm"},[t._v(t._s(i.text))])],1)],1)}))],2),t.loading?e("load-more",{attrs:{noMore:t.list.current_page>=t.list.last_page&&t.list.data.length>0,loading:t.loading}}):t._e(),e("v-uni-view",{staticClass:"space-max-footer fill-body"}),e("v-uni-view",{staticClass:"fix bottom-info fill-base b-1px-t"},[e("v-uni-view",{staticClass:"flex-between f-caption pl-lg pr-lg"},[e("v-uni-view",{staticClass:"input-text flex-y-center radius"},[e("i",{staticClass:"iconfont icon-edit ml-md mr-sm"}),e("v-uni-input",{staticClass:"input",attrs:{maxlength:"200",type:"text",placeholder:"说点什么..."},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.toComment.apply(void 0,arguments)}},model:{value:t.subForm.text,callback:function(i){t.$set(t.subForm,"text",i)},expression:"subForm.text"}})],1),e("v-uni-view",{staticClass:"flex-y-center"},[e("v-uni-view",{staticClass:"thumbs-comment-btn flex-y-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toChangeItem(2)}}},[e("i",{staticClass:"iconfont",class:[{"icon-shoucang":!t.detail.thumbs_status},{"icon-shoucang-fill":t.detail.thumbs_status}],style:{color:t.detail.thumbs_status?t.primaryColor:""}}),t._v(t._s(t.detail.thumbs_num?t.detail.thumbs_num:"点赞"))]),e("v-uni-view",{staticClass:"thumbs-comment-btn flex-y-center pl-lg"},[e("i",{staticClass:"iconfont icon-pinglun"}),t._v(t._s(t.detail.comment_num?t.detail.comment_num:"评论"))])],1)],1),e("v-uni-view",{staticClass:"space-safe"})],1),e("common-popup",{ref:"del_item",attrs:{type:"DELETE_ORDER",title:"删除评论",desc:"请确认是否删除评论，删除后将无法恢复",info:t.popupInfo},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.confirmDel.apply(void 0,arguments)}}}),e("uni-popup",{ref:"show_item",attrs:{type:"bottom"}},[e("v-uni-view",{staticClass:"show-popup pd-lg"},[e("v-uni-view",{staticClass:"flex-center mb-lg"},[e("v-uni-image",{staticClass:"avatar radius",attrs:{src:t.detail.coach_info.work_img}}),e("v-uni-view",{staticClass:"flex-1 ml-md f-title c-black"},[t._v(t._s(t.detail.coach_info.coach_name))])],1),e("v-uni-view",{staticClass:"show-item flex-center f-paragraph mt-md radius-16",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toChangeItem(3)}}},[t._v("不想看TA的作品")]),e("v-uni-view",{staticClass:"show-item flex-center f-paragraph mt-md radius-16",style:{color:t.primaryColor},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.$refs.show_item.close()}}},[t._v("取消")]),e("v-uni-view",{staticClass:"space-safe"})],1)],1),e("uni-popup",{ref:"technician_item",attrs:{type:"bottom"}},[e("v-uni-view",{staticClass:"technician-popup fill-base"},[e("v-uni-view",{staticClass:"pd-lg flex-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toTechnicianInfo.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"item-avatar radius",attrs:{src:t.detail.coach_info.work_img}}),e("v-uni-view",{staticClass:"flex-1 flex-between ml-md"},[e("v-uni-view",{staticClass:"flex-y-baseline f-caption c-caption"},[e("v-uni-view",{staticClass:"f-title c-title text-bold mr-sm max-350 ellipsis"},[t._v(t._s(t.detail.coach_info.coach_name))]),t._v("从业"+t._s(t.detail.coach_info.work_time)+"年")],1),e("v-uni-view",{staticClass:"flex-y-center f-caption c-caption"},[t._v("更多详情"),e("i",{staticClass:"iconfont icongengduo",staticStyle:{"font-size":"22rpx"}})])],1)],1),e("v-uni-view",{staticClass:"space-sm fill-body"}),e("v-uni-scroll-view",{staticClass:"list-content",attrs:{"scroll-y":!0},on:{touchmove:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i)}}},t._l(t.serviceList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"technician-list-item flex-center pd-lg fill-base radius-16",class:[{"b-1px-t":0!=a}]},[e("v-uni-image",{staticClass:"avatar lg radius-16",attrs:{mode:"aspectFill",src:i.cover},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goDetail(a)}}}),e("v-uni-view",{staticClass:"flex-1 ml-md"},[e("v-uni-view",{staticClass:"f-title c-title max-510 ellipsis",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goDetail(a)}}},[t._v(t._s(i.title))]),e("v-uni-view",{staticClass:"f-caption c-caption mt-sm mb-sm ellipsis"},[t._v(t._s(i.total_sale)+"人选择")]),e("v-uni-view",{staticClass:"flex-between"},[e("v-uni-view",{staticClass:"flex-y-baseline f-desc c-caption max-350 ellipsis"},[i.init_price?e("v-uni-view",{staticClass:"text-delete mr-sm"},[t._v("¥"+t._s(i.init_price))]):t._e(),e("v-uni-view",{staticClass:"f-title c-warning mr-sm"},[t._v("¥"+t._s(i.price))]),t._v("/\n\t\t\t\t\t\t\t\t"+t._s(i.time_long)+"分钟")],1),e("v-uni-view",{staticClass:"flex-warp"},[i.num?[e("v-uni-button",{staticClass:"reduce",style:{borderColor:t.primaryColor,color:t.primaryColor},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.changeNum(-1,a)}}},[e("i",{staticClass:"iconfont icon-jian-bold"})]),e("v-uni-button",{staticClass:"addreduce clear-btn"},[t._v(t._s(i.num||0))])]:t._e(),e("v-uni-button",{staticClass:"add",style:{background:t.primaryColor,borderColor:t.primaryColor},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.changeNum(1,a)}}},[e("i",{staticClass:"iconfont icon-jia-bold"})])],2)],1)],1)],1)})),1),!t.loading&&t.serviceList.length<=0?e("v-uni-view",{staticStyle:{margin:"0 100rpx"}},[e("abnor")],1):t._e(),e("v-uni-view",{staticClass:"space-sm fill-body"}),t.carList.car_count>0?e("v-uni-view",{staticClass:"flex-between pd-lg b-1px-t"},[e("v-uni-view",{staticClass:"flex-center"},[t._v("合计："),e("v-uni-view",{staticClass:"f-title c-warning text-bold ml-sm"},[t._v("¥"+t._s(t.carList.car_price))])],1),e("v-uni-view",{staticClass:"order-btn flex-center f-desc c-base radius",style:{background:t.primaryColor},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.toOrder.apply(void 0,arguments)}}},[t._v("提交订单")])],1):t._e(),e("v-uni-view",{staticClass:"space-safe"})],1)],1)],1):t._e()},n=[]},"06ad":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-70f46020]{background:#fff}body.?%PAGE?%[data-v-70f46020]{background:#fff}.dynamic-detail .banner-info[data-v-70f46020]{width:%?750?%;height:%?654?%}.dynamic-detail .banner-info .menu-info[data-v-70f46020]{top:%?29?%;right:%?29?%;width:%?60?%;height:%?60?%;background:rgba(2,2,2,.5);z-index:2}.dynamic-detail .dynamic-info .avatar[data-v-70f46020]{width:%?84?%;height:%?84?%}.dynamic-detail .dynamic-info .app-follow-btn[data-v-70f46020]{width:%?116?%;height:%?56?%;-webkit-transform:scaleZ(1turn);transform:scaleZ(1turn)}.dynamic-detail .dynamic-info .app-follow-btn .iconfont[data-v-70f46020]{font-size:%?24?%;margin-right:%?6?%}.dynamic-detail .dynamic-content[data-v-70f46020]{color:#222;line-height:%?40?%}.dynamic-detail .no-data-item .avatar[data-v-70f46020]{width:%?54?%;height:%?54?%}.dynamic-detail .no-data-item .text[data-v-70f46020]{width:%?616?%;height:%?56?%;color:#c7c7c7;background:#f7f7f7}.dynamic-detail .list-item .avatar[data-v-70f46020]{width:%?72?%;height:%?72?%}.dynamic-detail .list-item .text[data-v-70f46020]{color:#adadad}.dynamic-detail .list-item .comment[data-v-70f46020]{color:#3a3a3a;line-height:1.4}.dynamic-detail .list-item .examine-btn[data-v-70f46020]{width:%?82?%;height:%?34?%;color:#f96246;background:rgba(249,98,70,.1)}.dynamic-detail .bottom-info[data-v-70f46020]{width:%?750?%;bottom:0}.dynamic-detail .bottom-info .flex-between[data-v-70f46020]{height:%?100?%}.dynamic-detail .bottom-info .flex-between .input-text[data-v-70f46020]{width:%?372?%;height:%?68?%;background:#f6f6f6}.dynamic-detail .bottom-info .flex-between .input-text .iconfont[data-v-70f46020]{color:#c7c7c7;font-size:%?24?%}.dynamic-detail .bottom-info .flex-between .input-text .input[data-v-70f46020]{width:%?294?%}.dynamic-detail .bottom-info .flex-between .thumbs-comment-btn[data-v-70f46020]{min-width:%?102?%;color:#343434}.dynamic-detail .bottom-info .flex-between .thumbs-comment-btn .iconfont[data-v-70f46020]{font-size:%?44?%;margin-right:%?6?%}.dynamic-detail .show-popup[data-v-70f46020]{width:%?750?%;background:#f3f3f5;border-radius:%?30?% %?30?% 0 0}.dynamic-detail .show-popup .avatar[data-v-70f46020]{width:%?84?%;height:%?84?%}.dynamic-detail .show-popup .show-item[data-v-70f46020]{color:#222;height:%?100?%;background:#fff}.dynamic-detail .technician-popup[data-v-70f46020]{border-radius:%?20?% %?20?% 0 0}.dynamic-detail .technician-popup .item-avatar[data-v-70f46020]{width:%?90?%;height:%?90?%;background:#f4f6f8}.dynamic-detail .technician-popup .icon-close[data-v-70f46020]{font-size:%?50?%}.dynamic-detail .technician-popup .technician-text[data-v-70f46020]{max-height:%?150?%}.dynamic-detail .technician-popup .list-content[data-v-70f46020]{max-height:50vh}.dynamic-detail .technician-popup .order-btn[data-v-70f46020]{width:%?200?%;height:%?72?%}',""]),t.exports=i},"2cce":function(t,i,e){"use strict";e("7a82");var a=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("c7eb")),s=a(e("1da1")),o=a(e("5530"));e("99af"),e("d81d"),e("d3b7"),e("3ca3"),e("ddb0"),e("a434"),e("14d9"),e("caad"),e("c740"),e("2532");var c=e("26cb"),l={data:function(){return{iconType:{1:"icon-kefuwu",2:"iconjishifuwu",3:"iconkeyuyue"},textType:{1:"可服务",2:"服务中",3:"可预约"},options:{},detail:{},loading:!0,param:{page:1},list:{data:[]},serviceList:[],subForm:{text:""},rule:[{name:"text",checkType:"isNotNull",errorMsg:"请输入评论内容",regType:2}],popupInfo:{},lockTap:!1}},computed:(0,c.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo},userInfo:function(t){return t.user.userInfo},location:function(t){return t.user.location},carList:function(t){return t.order.carList}}),onLoad:function(t){this.$util.showLoading(),this.options=t,this.param.dynamic_id=t.id,this.initIndex()},onPullDownRefresh:function(){uni.showNavigationBarLoading(),this.initRefresh(),uni.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},onShareAppMessage:function(t){var i=this.userInfo.id,e=void 0===i?0:i,a=this.detail,n=a.id,s=a.title,o=a.cover,c="/user/pages/detail?pid=".concat(e,"&id=").concat(n);return this.$util.log(c),{title:s,imageUrl:o,path:c}},methods:(0,o.default)((0,o.default)((0,o.default)({},(0,c.mapActions)(["getConfigInfo","getUserInfo","getCarList","getServiceCoachList"])),(0,c.mapMutations)(["updateUserItem"])),{},{initIndex:function(){var t=arguments,i=this;return(0,s.default)((0,n.default)().mark((function e(){var a,s,o,c,l;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],s=i.options.pid,o=void 0===s?0:s,c=i.userInfo.id,l=void 0===c?0:c,!o||l){e.next=6;break}return e.next=6,i.getUserInfo();case 6:if(i.configInfo.id&&!a){e.next=9;break}return e.next=9,i.getConfigInfo();case 9:return e.next=11,i.getDetail();case 11:return e.next=13,i.getList();case 13:if(a||!i.$jweixin.isWechat()){e.next=17;break}return e.next=16,i.$jweixin.initJssdk();case 16:i.$jweixin.wxReady((function(){i.$jweixin.hideOptionMenu()}));case 17:i.$util.setNavigationBarColor({bg:i.primaryColor});case 18:case"end":return e.stop()}}),e)})))()},initRefresh:function(){this.initIndex(!0)},toAppShare:function(){var t=this,i=this.userInfo.id,e=void 0===i?0:i,a=this.detail,n=a.id,s=a.title,o=a.cover,c=siteInfo,l=c.siteroot,r=l.split("/index.php")[0],d="".concat(r,"/h5/#/dynamic/pages/detail?id=").concat(n,"&pid=").concat(e);this.$jweixin.wxReady((function(){t.$jweixin.showOptionMenu(),t.$jweixin.shareAppMessage(s,"",d,o),t.$jweixin.shareTimelineMessage(s,d,o)}))},getDetail:function(){var t=this;return(0,s.default)((0,n.default)().mark((function i(){var e,a,s,o,c,l,r,d,u,f,p,v,m,h,g,w,x,b,_,y,C,k,$,L,I;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e=t.options.id,a=t.location,a.lat){i.next=23;break}if(!t.$jweixin.isWechat()){i.next=22;break}return t.$util.showLoading(),i.next=7,t.$jweixin.wxReady2();case 7:return i.next=9,t.$jweixin.getWxLocation();case 9:if(s=i.sent,o=s.latitude,c=void 0===o?0:o,l=s.longitude,r=void 0===l?0:l,a={lng:r,lat:c,address:"定位失败",province:"",city:"",district:""},!c||!r){i.next=22;break}return d="".concat(c,",").concat(r),i.next=19,t.$api.base.getMapInfo({location:d});case 19:u=i.sent,f=JSON.parse(u),p=f.status,v=f.result,0==p&&(m=v.address,h=v.address_component,g=h.province,w=h.city,x=h.district,a={lng:r,lat:c,address:m,province:g,city:w,district:x});case 22:t.updateUserItem({key:"location",val:a});case 23:return b=a,_=b.lat,y=void 0===_?0:_,C=b.lng,k=void 0===C?0:C,i.next=26,t.$api.dynamic.coachDynamicInfo({id:e,lat:y,lng:k});case 26:$=i.sent,L=$.type,I=$.cover,$.imgs=$.imgs.map((function(t){return{img:1==L?t:I,jump_type:1==L?"picutre":"video",jump_url:t}})),t.detail=$,t.$util.hideAll();case 31:case"end":return i.stop()}}),i)})))()},getList:function(){var t=this;return(0,s.default)((0,n.default)().mark((function i(){var e,a,s;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.$util.showLoading(),e=t.list,a=t.param,i.next=4,t.$api.dynamic.commentList(a);case 4:s=i.sent,1==t.param.page||(s.data=e.data.concat(s.data)),t.list=s,t.loading=!1,t.$util.hideAll();case 8:case"end":return i.stop()}}),i)})))()},toChangeItem:function(t){var i=this;return(0,s.default)((0,n.default)().mark((function e(){var a,s,o,c,l,r;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i.options.id,s=i.detail.coach_id,o=["followAddOrCancek","thumbsAddOrCancek","shieldCoachAdd"],c=3==t?"mine":"dynamic",l=o[1*t-1],r=3==t?{type:1,coach_id:s}:{dynamic_id:a},1==t&&(r.coach_id=s),e.next=9,i.$api[c][l](r);case 9:if(3!=t){e.next=13;break}return i.$util.back(),setTimeout((function(){i.$util.goUrl({url:1,openType:"navigateBack"})}),1e3),e.abrupt("return");case 13:return e.next=15,i.getDetail();case 15:case"end":return e.stop()}}),e)})))()},validate:function(t){var i=new this.$util.Validate;this.rule.map((function(e){var a=e.name;i.add(t[a],e)}));var e=i.start();return e},toComment:function(){var t=this;return(0,s.default)((0,n.default)().mark((function i(){var e,a,s;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e=t.$util.deepCopy(t.subForm),a=t.options.id,e.dynamic_id=a,s=t.validate(e),!s){i.next=7;break}return t.$util.showToast({title:s}),i.abrupt("return");case 7:if(e.text=e.text.substring(0,200),!t.lockTap){i.next=10;break}return i.abrupt("return");case 10:return t.lockTap=!0,t.$util.showLoading(),i.prev=12,i.next=15,t.$api.dynamic.commentAdd(e);case 15:return t.$util.hideAll(),t.$util.showToast({title:"评论成功"}),t.lockTap=!1,t.subForm.text="",i.next=21,Promise.all([t.getDetail(),t.getList(1)]);case 21:i.next=26;break;case 23:i.prev=23,i.t0=i["catch"](12),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 26:case"end":return i.stop()}}),i,null,[[12,23]])})))()},toDel:function(t){var i=this.list.data[t],e=i.id,a=i.coach_id,n=i.user_id,s=(i.cover,this.userInfo.id),o=void 0===s?0:s;o==n&&o===a&&(this.popupInfo={id:e,name:"",image:"",index:t},this.$refs.del_item.open())},confirmDel:function(){var t=this;return(0,s.default)((0,n.default)().mark((function i(){var e,a,s;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e=t.popupInfo,a=e.id,s=e.index,!t.lockTap){i.next=3;break}return i.abrupt("return");case 3:return t.lockTap=!0,t.$util.showLoading(),i.prev=5,i.next=8,t.$api.dynamic.commentDel({id:a});case 8:t.lockTap=!1,t.$util.hideAll(),t.list.data.splice(s,1),t.$util.showToast({title:"删除成功"}),t.$refs.del_item.close(),i.next=18;break;case 15:i.prev=15,i.t0=i["catch"](5),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 18:case"end":return i.stop()}}),i,null,[[5,15]])})))()},getServiceList:function(){var t=this;return(0,s.default)((0,n.default)().mark((function i(){var e,a,s,o;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.detail.coach_id,i.next=3,t.getCarList({coach_id:e});case 3:return i.next=5,t.$api.service.coachServiceList({coach_id:e});case 5:a=i.sent,s=a.data,o=[],t.carList.list&&t.carList.list.length>0&&t.carList.list.map((function(t){o.push(t.service_id)})),s&&s.length>0&&s.map((function(i){if(o.includes(i.id)){var e=o.findIndex((function(t){return t==i.id}));i.num=t.carList.list[e].num,i.cart_id=t.carList.list[e].id}})),t.serviceList=s,t.$refs.technician_item.open();case 12:case"end":return i.stop()}}),i)})))()},changeNum:function(t,i){var e=this;return(0,s.default)((0,n.default)().mark((function a(){var s,o,c,l,r,d,u,f,p,v,m,h,g;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.detail.coach_id,o=e.serviceList[i],c=o.id,l=o.cart_id,r=void 0===l?0:l,!e.lockTap){a.next=4;break}return a.abrupt("return");case 4:if(e.lockTap=!0,d=t>0?"addCar":"delCar",u=t>0?{service_id:c,coach_id:s,num:1}:{id:r,num:1},"delCar"!=d||u.id){a.next=10;break}return e.lockTap=!1,a.abrupt("return");case 10:return a.prev=10,a.next=13,e.$api.order[d](u);case 13:return f=a.sent,p=e.serviceList[i],v=p.num,m=void 0===v?0:v,h=p.cart_id,g=void 0===h?0:h,e.serviceList[i].num=m+t,f&&t>0&&!g&&(e.serviceList[i].cart_id=f),e.serviceList[i].num<1&&(e.serviceList[i].cart_id=0),a.next=20,e.getCarList({coach_id:s});case 20:e.lockTap=!1,a.next=26;break;case 23:a.prev=23,a.t0=a["catch"](10),e.lockTap=!1;case 26:case"end":return a.stop()}}),a,null,[[10,23]])})))()},toOrder:function(){if(this.carList.car_count<1)this.$util.showToast({title:"请选择服务"});else{var t=this.detail.coach_id;this.$refs.technician_item.close(),this.$util.goUrl({url:"/user/pages/order?id=".concat(t)})}},toTechnicianInfo:function(){this.$refs.technician_item.close(),this.$util.goUrl({url:"/user/pages/technician-info?id=".concat(detail.coach_id)})}})};i.default=l},"91d1":function(t,i,e){var a=e("06ad");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("5533c985",a,!0,{sourceMap:!1,shadowMode:!1})},9853:function(t,i,e){"use strict";e.r(i);var a=e("05b7"),n=e("0269");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("b7d1");var o=e("f0c5"),c=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"70f46020",null,!1,a["a"],void 0);i["default"]=c.exports},b7d1:function(t,i,e){"use strict";var a=e("91d1"),n=e.n(a);n.a}}]);